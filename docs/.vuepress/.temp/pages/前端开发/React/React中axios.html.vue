<template><div><p><a href="https://www.axios-http.cn/" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£<ExternalLinkIcon/></a></p>
<p><a href="https://mp.weixin.qq.com/s/MTj0Or-QFmv9a7BugO6--A" target="_blank" rel="noopener noreferrer">React ç³»åˆ—åä¸‰ - axios åº“çš„ä½¿ç”¨<ExternalLinkIcon/></a></p>
<h2 id="ä¸ºä»€ä¹ˆä¸æ˜¯" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸æ˜¯" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆä¸æ˜¯...?</h2>
<ol>
<li>Jquery-ajax:æ²¡ä»€ä¹ˆå¥½è¯´çš„</li>
<li>Fetch APIï¼šFetch æ˜¯ä¸€ä¸ª low-levelï¼ˆåº•å±‚ï¼‰çš„ APIï¼Œæ²¡æœ‰å¸®åŠ©ä½ å°è£…å¥½å„ç§å„æ ·çš„åŠŸèƒ½ å’Œå®ç°</li>
</ol>
<h2 id="ä¸ºä»€ä¹ˆæ˜¯-axios" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆæ˜¯-axios" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆæ˜¯ Axiosï¼Ÿ</h2>
<p>Vue ä½œè€…ä¹Ÿæ˜¯æ¨èåœ¨ vue ä¸­ä½¿ç”¨ axios(å°¤å¤§è¯´å¥½å°±æ˜¯å¥½ ğŸ‘Œ)</p>
<h2 id="axios-çš„åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#axios-çš„åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> Axios çš„åŸºæœ¬ä½¿ç”¨</h2>
<h3 id="å‘é€è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#å‘é€è¯·æ±‚" aria-hidden="true">#</a> å‘é€è¯·æ±‚</h3>
<p>react ä¸€èˆ¬åœ¨<code v-pre>componentDidMount</code>ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å‘ç”Ÿç½‘ç»œè¯·æ±‚</p>
<p>ğŸŒ° ä¾‹å­ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">res</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">url:</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>res<span class="token punctuation">.</span>url<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">}</span>
  <span class="token keyword">async</span> <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://httpbin.org/get'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">res</span><span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>å‘é€ get è¯·æ±‚</li>
<li>å‘é€ post è¯·æ±‚</li>
<li>å¤šä¸ªè¯·æ±‚çš„åˆå¹¶</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> request1 <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://httpbin.org/get'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'why'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> request2 <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'https://httpbin.org/post'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'kobe'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
axios
  <span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>request1<span class="token punctuation">,</span> request2<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>res1<span class="token punctuation">,</span> res2<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">,</span> res2<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>ä½¿ç”¨ asyncã€await å‘é€è¯·æ±‚</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"https://httpbin.org/get"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"kobe"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">40</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é…ç½®ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#é…ç½®ä¿¡æ¯" aria-hidden="true">#</a> é…ç½®ä¿¡æ¯</h3>
<ul>
<li>ä¼˜å…ˆæ˜¯è¯·æ±‚çš„ config å‚æ•°é…ç½®</li>
<li>å…¶æ¬¡æ˜¯å®ä¾‹çš„ default ä¸­çš„é…ç½®</li>
<li>æœ€åæ˜¯åˆ›å»ºå®ä¾‹æ—¶çš„é…ç½®</li>
</ul>
<h3 id="æ‹¦æˆªå™¨" tabindex="-1"><a class="header-anchor" href="#æ‹¦æˆªå™¨" aria-hidden="true">#</a> æ‹¦æˆªå™¨</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// 1.å‘é€ç½‘ç»œè¯·æ±‚æ—¶ï¼Œåœ¨é¡µé¢ä¸­æ·»åŠ ä¸€ä¸ªloadingç»„ä»¶ä½œä¸ºåŠ¨ç”»ï¼›</span>

  <span class="token comment">// 2.æŸäº›ç½‘ç»œè¯·æ±‚è¦æ±‚ç”¨æˆ·å¿…é¡»ç™»å½•ï¼Œå¯ä»¥åœ¨è¯·æ±‚ä¸­åˆ¤æ–­æ˜¯å¦æºå¸¦äº†tokenï¼Œæ²¡æœ‰æºå¸¦tokenç›´æ¥è·³è½¬åˆ°loginé¡µé¢ï¼›</span>

  <span class="token comment">// 3.å¯¹æŸäº›è¯·æ±‚å‚æ•°è¿›è¡Œåºåˆ—åŒ–ï¼›</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">&amp;&amp;</span> err<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">case400</span><span class="token operator">:</span>
        err<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">"è¯·æ±‚é”™è¯¯"</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token literal-property property">case401</span><span class="token operator">:</span>
        err<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">"æœªæˆæƒè®¿é—®"</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> err<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="axios-åº“çš„äºŒæ¬¡å°è£…" tabindex="-1"><a class="header-anchor" href="#axios-åº“çš„äºŒæ¬¡å°è£…" aria-hidden="true">#</a> axios åº“çš„äºŒæ¬¡å°è£…</h2>
<h3 id="ä¸ºä»€ä¹ˆè¦å°è£…" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦å°è£…" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆè¦å°è£…ï¼Ÿ</h3>
<p>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å¯¹ axios è¿›è¡ŒäºŒæ¬¡å°è£…å‘¢ï¼Ÿ</p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ axios æ¥è¿›è¡Œå¼€å‘çš„ï¼›</li>
<li>ä½†æ˜¯æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œå‡å¦‚æœ‰ 100 å¤šå¤„ä¸­éƒ½ç›´æ¥ä¾èµ– axiosï¼Œçªç„¶é—´æœ‰ä¸€å¤© axios å‡ºç°äº†é‡å¤§ bugï¼Œå¹¶ä¸”è¯¥åº“å·²ç»ä¸å†ç»´æŠ¤ï¼Œè¿™ä¸ªæ—¶å€™ä½ å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</li>
<li>å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä¼šå¯»æ‰¾ä¸€ä¸ªæ–°çš„ç½‘ç»œè¯·æ±‚åº“æˆ–è€…è‡ªå·±è¿›è¡ŒäºŒæ¬¡å°è£…ï¼›</li>
<li>ä½†æ˜¯æœ‰ 100 å¤šå¤„éƒ½ä¾èµ–äº† axiosï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œä¿®æ”¹å—ï¼Ÿæˆ‘ä»¬æ‰€æœ‰ä¾èµ– axios åº“çš„åœ°æ–¹éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹</li>
<li>å¦‚æœæ˜¯è‡ªå·±è¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼Œå¹¶ä¸”æš´éœ²ä¸€å¥—è‡ªå·±çš„ API:åªéœ€è¦é‡æ–°å°è£…å¦ä¸€ä¸ªç½‘ç»œè¯·æ±‚åº“(åªéœ€è¦ä¿®æ”¹ä¸€ä¸ª js æ–‡ä»¶)</li>
</ul>
<h3 id="axios-äºŒæ¬¡å°è£…" tabindex="-1"><a class="header-anchor" href="#axios-äºŒæ¬¡å°è£…" aria-hidden="true">#</a> axios äºŒæ¬¡å°è£…</h3>
<p>åˆ›å»ºä¸€ä¸ª service æ–‡ä»¶å¤¹ï¼ˆå…¶ä»–åå­—éƒ½å¯ä»¥ï¼‰ï¼Œç”¨äºå­˜æ”¾æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ç›¸å…³çš„å†…å®¹ã€‚</p>
<p>åˆ›å»ºæ–‡ä»¶ config.jsï¼Œç”¨äºå­˜æ”¾ä¸€äº›é…ç½®ä¿¡æ¯ï¼š</p>
<p><a href="https://blog.csdn.net/sayUonly/article/details/118225775" target="_blank" rel="noopener noreferrer">React ä½¿ç”¨.env.*è¿›è¡Œç¯å¢ƒéƒ¨ç½²<ExternalLinkIcon/></a></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">TIMEOUT</span> <span class="token operator">=</span> <span class="token number">5000</span>

<span class="token keyword">const</span> devBaseURL <span class="token operator">=</span> <span class="token string">'https://httpbin.org'</span>
<span class="token keyword">const</span> proBaseURL <span class="token operator">=</span> <span class="token string">'https://production.org'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> baseURL <span class="token operator">=</span>
  process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span> <span class="token operator">?</span> devBaseURL <span class="token operator">:</span> proBaseURL
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º request.jsï¼Œç”¨äºå°è£…è¯·æ±‚å¯¹è±¡ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">TIMEOUT</span><span class="token punctuation">,</span> baseURL <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./config'</span>

<span class="token keyword">const</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token constant">TIMEOUT</span><span class="token punctuation">,</span>
  <span class="token literal-property property">baseURL</span><span class="token operator">:</span> baseURL<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token parameter">config</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.å‘é€ç½‘ç»œè¯·æ±‚æ—¶ï¼Œåœ¨é¡µé¢ä¸­æ·»åŠ ä¸€ä¸ªloadingç»„ä»¶ä½œä¸ºåŠ¨ç”»ï¼›</span>

    <span class="token comment">// 2.æŸäº›ç½‘ç»œè¯·æ±‚è¦æ±‚ç”¨æˆ·å¿…é¡»ç™»å½•ï¼Œå¯ä»¥åœ¨è¯·æ±‚ä¸­åˆ¤æ–­æ˜¯å¦æºå¸¦äº†tokenï¼Œæ²¡æœ‰æºå¸¦tokenç›´æ¥è·³è½¬åˆ°loginé¡µé¢ï¼›</span>

    <span class="token comment">// 3.å¯¹æŸäº›è¯·æ±‚å‚æ•°è¿›è¡Œåºåˆ—åŒ–ï¼›</span>
    <span class="token keyword">return</span> config
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> err
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
  <span class="token parameter">response</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span>data
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token parameter">err</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">&amp;&amp;</span> err<span class="token punctuation">.</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token number">400</span><span class="token operator">:</span>
          err<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">'è¯·æ±‚é”™è¯¯'</span>
          <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token number">401</span><span class="token operator">:</span>
          err<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">'æœªæˆæƒè®¿é—®'</span>
          <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> err
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> instance
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ï¼š</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token function">equest</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/get'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'why'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span>

<span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/post'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'kobe'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


