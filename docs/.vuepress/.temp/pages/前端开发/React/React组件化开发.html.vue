<template><div><h2 id="react-çš„ç»„ä»¶åŒ–" tabindex="-1"><a class="header-anchor" href="#react-çš„ç»„ä»¶åŒ–" aria-hidden="true">#</a> React çš„ç»„ä»¶åŒ–</h2>
<div class="custom-container tip">
<p class="custom-container-title">render å‡½æ•°çš„è¿”å›å€¼</p>
<p>å½“ <code v-pre>render</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥ <code v-pre>this.props</code> å’Œ <code v-pre>this.state</code> çš„å˜åŒ–å¹¶è¿”å›ä»¥ä¸‹ç±»å‹ä¹‹ä¸€:</p>
<ul>
<li><strong><code v-pre>React </code>å…ƒç´ </strong>ï¼š
<ul>
<li>é€šå¸¸é€šè¿‡ <code v-pre>JSX</code> åˆ›å»º</li>
<li>ä¾‹å¦‚ï¼Œ<code v-pre>&lt;div /&gt;</code> ä¼šè¢« <code v-pre>React</code> æ¸²æŸ“ä¸º <code v-pre>DOM</code> èŠ‚ç‚¹ï¼Œ<code v-pre>&lt;MyComponent /&gt;</code>ä¼šè¢« <code v-pre>React</code> æ¸²æŸ“ä¸ºè‡ªå®šä¹‰ç»„ä»¶</li>
<li>æ— è®ºæ˜¯ <code v-pre>&lt;div /&gt;</code> è¿˜æ˜¯ <code v-pre>&lt;MyComponent /&gt;</code> å‡ä¸º <code v-pre>React</code> å…ƒç´ </li>
</ul>
</li>
<li><strong>æ•°ç»„æˆ– <code v-pre>fragments</code></strong>: ä½¿å¾— <code v-pre>render</code> æ–¹æ³•å¯ä»¥è¿”å›å¤šä¸ªå…ƒç´ </li>
<li><strong><code v-pre>Portals</code></strong>ï¼šå¯ä»¥æ¸²æŸ“å­èŠ‚ç‚¹åˆ°ä¸åŒçš„ DOM å­æ ‘ä¸­</li>
<li><strong>å­—ç¬¦ä¸²æˆ–æ•°å€¼ç±»å‹</strong>ï¼šå®ƒä»¬åœ¨ DOM ä¸­ä¼šè¢«æ¸²æŸ“ä¸ºæ–‡æœ¬èŠ‚ç‚¹</li>
<li><strong>å¸ƒå°”ç±»å‹æˆ– <code v-pre>null</code></strong>:ä»€ä¹ˆéƒ½ä¸æ¸²æŸ“</li>
<li>ä» react17 å¼€å§‹ render ç¦æ­¢è¿”å› undefined</li>
</ul>
</div>
<h3 id="ç±»ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#ç±»ç»„ä»¶" aria-hidden="true">#</a> ç±»ç»„ä»¶</h3>
<p>ç±»ç»„ä»¶çš„å®šä¹‰æœ‰å¦‚ä¸‹è¦æ±‚ï¼š</p>
<ul>
<li>ç»„ä»¶çš„åç§°æ˜¯å¤§å†™å­—ç¬¦å¼€å¤´ï¼ˆæ— è®ºç±»ç»„ä»¶è¿˜æ˜¯å‡½æ•°ç»„ä»¶ï¼‰</li>
<li>ç±»ç»„ä»¶éœ€è¦ç»§æ‰¿è‡ª <code v-pre>React.Component</code></li>
<li>ç±»ç»„ä»¶å¿…é¡»å®ç° <code v-pre>render</code> å‡½æ•°</li>
</ul>
<p>ä½¿ç”¨ <code v-pre>class</code> å®šä¹‰ä¸€ä¸ªç»„ä»¶ï¼š</p>
<ul>
<li><code v-pre>constructor</code> æ˜¯å¯é€‰çš„ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨ <code v-pre>constructor</code> ä¸­åˆå§‹åŒ–ä¸€äº›æ•°æ®</li>
<li><code v-pre>this.state</code> ä¸­ç»´æŠ¤çš„å°±æ˜¯æˆ‘ä»¬ç»„ä»¶å†…éƒ¨çš„æ•°æ®</li>
<li><code v-pre>render()</code> æ–¹æ³•æ˜¯ <code v-pre>class</code> ç»„ä»¶<strong>ä¸­å”¯ä¸€å¿…é¡»å®ç°</strong>çš„æ–¹æ³•</li>
</ul>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'æˆ‘æ˜¯appç»„ä»¶'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span><span class="token plain-text">,å•Šè¿™</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‡½æ•°ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°ç»„ä»¶" aria-hidden="true">#</a> å‡½æ•°ç»„ä»¶</h3>
<p>å‡½æ•°ç»„ä»¶æ˜¯ä½¿ç”¨ <code v-pre>function</code> æ¥è¿›è¡Œå®šä¹‰çš„å‡½æ•°ï¼Œ<strong>åªæ˜¯è¿™ä¸ªå‡½æ•°ä¼šè¿”å›å’Œç±»ç»„ä»¶ä¸­ render å‡½æ•°è¿”å›ä¸€æ ·çš„å†…å®¹</strong>ã€‚</p>
<p>å‡½æ•°ç»„ä»¶æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼ˆå½“ç„¶ï¼Œ<code v-pre>hooks</code>ï¼Œå°±ä¸ä¸€æ ·äº†ï¼‰ï¼š</p>
<ul>
<li>æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿä¼šè¢«æ›´æ–°å¹¶æŒ‚è½½ï¼Œä½†æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°</li>
<li>æ²¡æœ‰ <code v-pre>this</code>(ç»„ä»¶å®ä¾‹)</li>
<li>æ²¡æœ‰å†…éƒ¨çŠ¶æ€<code v-pre>state</code></li>
</ul>
<p>å®šä¹‰å‡½æ•°ç»„ä»¶ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">æˆ‘æ˜¯functionç»„ä»¶</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> ç”Ÿå‘½å‘¨æœŸ</h2>
<p>ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œåˆ†æˆäº†å¾ˆå¤šä¸ªé˜¶æ®µ:</p>
<ul>
<li>æ¯”å¦‚è£…è½½é˜¶æ®µ<code v-pre>Mount</code>ï¼Œç»„ä»¶ç¬¬ä¸€æ¬¡åœ¨ DOM æ ‘ä¸­è¢«æ¸²æŸ“çš„è¿‡ç¨‹</li>
<li>æ¯”å¦‚æ›´æ–°è¿‡ç¨‹<code v-pre>Update</code>ï¼Œç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°æ›´æ–°æ¸²æŸ“çš„è¿‡ç¨‹</li>
<li>æ¯”å¦‚å¸è½½è¿‡ç¨‹<code v-pre>Unmount</code>ï¼Œç»„ä»¶ä» DOM æ ‘ä¸­è¢«ç§»é™¤çš„è¿‡ç¨‹</li>
</ul>
<p><code v-pre>React</code> å†…éƒ¨ä¸ºäº†å‘Šè¯‰æˆ‘ä»¬å½“å‰å¤„äºå“ªäº›é˜¶æ®µï¼Œä¼šå¯¹æˆ‘ä»¬ç»„ä»¶å†…éƒ¨å®ç°çš„æŸäº›å‡½æ•°è¿›è¡Œå›è°ƒï¼Œè¿™äº›å‡½æ•°å°±æ˜¯ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p>
<ul>
<li>æ¯”å¦‚å®ç° <code v-pre>componentDidMount</code> å‡½æ•°ï¼šç»„ä»¶å·²ç»æŒ‚è½½åˆ° <code v-pre>DOM </code>ä¸Šæ—¶ï¼Œå°±ä¼šå›è°ƒ</li>
<li>æ¯”å¦‚å®ç°<code v-pre>componentDidUpdate</code>å‡½æ•°ï¼šç»„ä»¶å·²ç»å‘ç”Ÿäº†æ›´æ–°æ—¶ï¼Œå°±ä¼šå›è°ƒ</li>
<li>æ¯”å¦‚å®ç° <code v-pre>componentWillUnmount</code> å‡½æ•°ï¼šç»„ä»¶å³å°†è¢«ç§»é™¤æ—¶ï¼Œå°±ä¼šå›è°ƒ</li>
<li>æˆ‘ä»¬å¯ä»¥åœ¨è¿™äº›å›è°ƒå‡½æ•°ä¸­ç¼–å†™è‡ªå·±çš„é€»è¾‘ä»£ç ï¼Œæ¥å®Œæˆè‡ªå·±çš„éœ€æ±‚åŠŸèƒ½</li>
</ul>
<p><strong>æˆ‘ä»¬è¯´åˆ° <code v-pre>React</code> ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œä¸»è¦è°ˆçš„æ˜¯ç±»çš„ç”Ÿå‘½å‘¨æœŸï¼Œå› ä¸ºå‡½æ•°å¼ç»„ä»¶æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„(åé¢æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code v-pre>hooks</code> æ¥æ¨¡æ‹Ÿä¸€äº›ç”Ÿå‘½å‘¨æœŸçš„å›è°ƒ)</strong></p>
<h3 id="ç”Ÿå‘½å‘¨æœŸå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸå‡½æ•°" aria-hidden="true">#</a> ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h3>
<p><img src="https://zfh-nanjing-bucket.oss-cn-nanjing.aliyuncs.com/blog-images/ç”Ÿå‘½å‘¨æœŸè§£æ.png" alt="ç”Ÿå‘½å‘¨æœŸè§£æ" loading="lazy"></p>
<h4 id="constructor" tabindex="-1"><a class="header-anchor" href="#constructor" aria-hidden="true">#</a> Constructor</h4>
<p>å¦‚æœä¸åˆå§‹åŒ– <code v-pre>state</code> æˆ–ä¸è¿›è¡Œæ–¹æ³•ç»‘å®šï¼Œåˆ™ä¸éœ€è¦ä¸º <code v-pre>React</code>ç»„ä»¶å®ç°æ„é€ å‡½æ•°</p>
<p><code v-pre>constructor</code> ä¸­é€šå¸¸åªåšä¸¤ä»¶äº‹æƒ…ï¼š</p>
<ul>
<li>é€šè¿‡ç»™ <code v-pre>this.state</code>èµ‹å€¼å¯¹è±¡æ¥åˆå§‹åŒ–å†…éƒ¨çš„ <code v-pre>state</code></li>
<li>ä¸ºäº‹ä»¶ç»‘å®šå®ä¾‹<code v-pre>this</code>ï¼š<code v-pre>this.xxx.bind(this)</code></li>
</ul>
<h4 id="componentdidmount" tabindex="-1"><a class="header-anchor" href="#componentdidmount" aria-hidden="true">#</a> componentDidMount</h4>
<p><code v-pre>componentDidMount()</code>ä¼šåœ¨ç»„ä»¶æŒ‚è½½åï¼ˆæ’å…¥ <code v-pre>DOM</code> æ ‘ä¸­ï¼‰ç«‹å³è°ƒç”¨</p>
<p><code v-pre>componentDidMount</code>ä¸­é€šå¸¸è¿›è¡Œå“ªé‡Œæ“ä½œå‘¢ï¼Ÿ</p>
<ul>
<li>ä¾èµ–äº <code v-pre>DOM</code>çš„æ“ä½œå¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œ</li>
<li>åœ¨æ­¤å¤„å‘é€ç½‘ç»œè¯·æ±‚å°±æœ€å¥½çš„åœ°æ–¹ï¼ˆå®˜æ–¹å»ºè®®ï¼‰</li>
<li>å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ ä¸€äº›è®¢é˜…ï¼ˆä¼šåœ¨ <code v-pre>componentWillUnmount</code> å–æ¶ˆè®¢é˜…ï¼‰</li>
</ul>
<h4 id="componentdidupdate" tabindex="-1"><a class="header-anchor" href="#componentdidupdate" aria-hidden="true">#</a> componentDidUpdate</h4>
<p><code v-pre>componentDidUpdate()</code> ä¼šåœ¨æ›´æ–°åä¼šè¢«ç«‹å³è°ƒç”¨ï¼Œé¦–æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œæ­¤æ–¹æ³•</p>
<ul>
<li>å½“ç»„ä»¶æ›´æ–°åï¼Œå¯ä»¥åœ¨æ­¤å¤„å¯¹ <code v-pre>DOM</code> è¿›è¡Œæ“ä½œ</li>
<li>å¦‚æœä½ å¯¹æ›´æ–°å‰åçš„<code v-pre>props</code>è¿›è¡Œäº†æ¯”è¾ƒï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åœ¨æ­¤å¤„è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼ˆä¾‹å¦‚ï¼Œå½“ <code v-pre>props</code>æœªå‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œç½‘ç»œè¯·æ±‚ï¼‰</li>
</ul>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…¸å‹ç”¨æ³•ï¼ˆä¸è¦å¿˜è®°æ¯”è¾ƒ propsï¼‰ï¼š</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>userID <span class="token operator">!==</span> prevProps<span class="token punctuation">.</span>userID<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>userID<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="componentwillunmount" tabindex="-1"><a class="header-anchor" href="#componentwillunmount" aria-hidden="true">#</a> componentWillUnmount</h4>
<p><code v-pre>componentWillUnmount()</code> ä¼šåœ¨ç»„ä»¶å¸è½½åŠé”€æ¯ä¹‹å‰ç›´æ¥è°ƒç”¨</p>
<ul>
<li>åœ¨æ­¤æ–¹æ³•ä¸­æ‰§è¡Œå¿…è¦çš„æ¸…ç†æ“ä½œ</li>
<li>ä¾‹å¦‚ï¼Œæ¸…é™¤ <code v-pre>timer</code>ï¼Œå–æ¶ˆç½‘ç»œè¯·æ±‚æˆ–æ¸…é™¤åœ¨ <code v-pre>componentDidMount()</code>ä¸­åˆ›å»ºçš„è®¢é˜…ç­‰</li>
</ul>
<h2 id="ç»„ä»¶çš„åµŒå¥—" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶çš„åµŒå¥—" aria-hidden="true">#</a> ç»„ä»¶çš„åµŒå¥—</h2>
<p>ç»„ä»¶åŒ–çš„æ ¸å¿ƒæ€æƒ³åº”è¯¥æ˜¯å¯¹ç»„ä»¶è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†æˆä¸€ä¸ªä¸ªå°çš„ç»„ä»¶ï¼Œå†å°†è¿™äº›ç»„ä»¶ç»„åˆåµŒå¥—åœ¨ä¸€èµ·ï¼Œæœ€ç»ˆå½¢æˆæˆ‘ä»¬çš„åº”ç”¨ç¨‹åº</p>
<p>ä¸€ä¸ªç®€å•çš„ç»„ä»¶åµŒå¥—çš„ä¾‹å­ ğŸŒ°ï¼š</p>
<center>
<p><img src="https://zfh-nanjing-bucket.oss-cn-nanjing.aliyuncs.com/blog-images/ç»„ä»¶çš„åµŒå¥—.png" alt="ç»„ä»¶çš„åµŒå¥—" loading="lazy"></p>
</center>
<CodePen
  link="https://codepen.io/zhangfanhang/pen/qBpQegw"
  :theme="$isDarkMode? 'dark': 'light'"
/>
<h2 id="ç»„ä»¶é—´çš„é€šä¿¡" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶é—´çš„é€šä¿¡" aria-hidden="true">#</a> ç»„ä»¶é—´çš„é€šä¿¡</h2>
<h3 id="çˆ¶ç»„ä»¶ä¼ é€’å­ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#çˆ¶ç»„ä»¶ä¼ é€’å­ç»„ä»¶" aria-hidden="true">#</a> çˆ¶ç»„ä»¶ä¼ é€’å­ç»„ä»¶</h3>
<div class="custom-container tip">
<p class="custom-container-title">super(props),super()ä»¥åŠä¸å†™ super çš„åŒºåˆ«</p>
<ul>
<li>å¦‚æœç”¨åˆ°äº† <code v-pre>constructor</code> å°±å¿…é¡»å†™ <code v-pre>super()</code>,æ˜¯ç”¨æ¥åˆå§‹åŒ– <code v-pre>this</code> çš„</li>
<li>å¦‚æœä½ åœ¨ <code v-pre>constructor</code> ä¸­è¦ä½¿ç”¨ <code v-pre>this.props</code>,å°±å¿…é¡»ç»™ <code v-pre>super</code> åŠ å‚æ•°ï¼š<code v-pre>super(props)</code></li>
<li><strong>æ— è®ºæœ‰æ²¡æœ‰ <code v-pre>constructor</code>ï¼Œåœ¨ <code v-pre>render</code> ä¸­ <code v-pre>this.props</code> éƒ½æ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œè¿™æ˜¯ React é»˜è®¤å®ç°çš„</strong></li>
<li>å¦‚æœæ²¡ç”¨åˆ° <code v-pre>constructor</code>,æ˜¯å¯ä»¥ä¸å†™çš„ï¼›React ä¼šé»˜è®¤æ·»åŠ ä¸€ä¸ªç©ºçš„ <code v-pre>constructor</code>ã€‚</li>
</ul>
</div>
<p>çˆ¶ç»„ä»¶åœ¨å±•ç¤ºå­ç»„ä»¶ï¼Œå¯èƒ½ä¼šä¼ é€’ä¸€äº›æ•°æ®ç»™å­ç»„ä»¶ï¼š</p>
<ul>
<li>çˆ¶ç»„ä»¶é€šè¿‡<strong>å±æ€§=å€¼</strong>çš„å½¢å¼æ¥ä¼ é€’ç»™å­ç»„ä»¶æ•°æ®ï¼›</li>
<li>å­ç»„ä»¶é€šè¿‡<code v-pre>props</code>å‚æ•°è·å–çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼›</li>
</ul>
<details class="custom-container details"><summary>çˆ¶ä¼ å­:ç±»ç»„ä»¶</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">class</span> <span class="token class-name">ChildCom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æˆ‘çš„åå­—æ˜¯</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'frank'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCom</span></span> <span class="token attr-name">name</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<details class="custom-container details"><summary>çˆ¶ä¼ å­:å‡½æ•°ç»„ä»¶</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">ChildCom</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token operator">=</span> props
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æˆ‘çš„åå­—æ˜¯</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCom</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>frank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<h3 id="å‚æ•°-proptypes" tabindex="-1"><a class="header-anchor" href="#å‚æ•°-proptypes" aria-hidden="true">#</a> å‚æ•° propTypes</h3>
<p>å¯¹äºä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½å¸Œæœ›è¿›è¡ŒéªŒè¯ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹é¡¹ç›®æ¥è¯´ï¼š</p>
<p>å½“ç„¶ï¼Œå¦‚æœä½ é¡¹ç›®ä¸­é›†æˆäº† <code v-pre>Flow</code> æˆ–è€… <code v-pre>TypeScript</code>ï¼Œé‚£ä¹ˆç›´æ¥å°±å¯ä»¥è¿›è¡Œç±»å‹éªŒè¯ï¼›ä½†æ˜¯ï¼Œ<strong>å³ä½¿æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ Flow æˆ–è€… TypeScriptï¼Œä¹Ÿå¯ä»¥é€šè¿‡ prop-types åº“æ¥è¿›è¡Œå‚æ•°éªŒè¯</strong>ï¼›</p>
<p>ä» <code v-pre>React v15.5</code>å¼€å§‹ï¼Œ<code v-pre>React.PropTypes</code> å·²ç§»å…¥å¦ä¸€ä¸ªåŒ…ä¸­ï¼š<code v-pre>prop-types</code> åº“</p>
<p>æ›´å¤šçš„éªŒè¯æ–¹å¼ï¼Œå¯ä»¥<a href="https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html" target="_blank" rel="noopener noreferrer">å‚è€ƒå®˜ç½‘<ExternalLinkIcon/></a></p>
<ul>
<li>æ¯”å¦‚éªŒè¯æ•°ç»„ï¼Œå¹¶ä¸”æ•°ç»„ä¸­åŒ…å«å“ªäº›å…ƒç´ ï¼›</li>
<li>æ¯”å¦‚éªŒè¯å¯¹è±¡ï¼Œå¹¶ä¸”å¯¹è±¡ä¸­åŒ…å«å“ªäº› <code v-pre>key</code> ä»¥åŠ <code v-pre>value</code> æ˜¯ä»€ä¹ˆç±»å‹ï¼›</li>
<li>æ¯”å¦‚æŸä¸ª<code v-pre>prop</code>æ˜¯å¿…é¡»çš„ï¼Œä½¿ç”¨ <code v-pre>requiredFunc: PropTypes.func.isRequired</code></li>
</ul>
<p>å¦‚æœæ²¡æœ‰ä¼ é€’ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰é»˜è®¤å€¼å‘¢ï¼Ÿ<strong>æˆ‘ä»¬ä½¿ç”¨ <code v-pre>defaultProps</code>å°±å¯ä»¥äº†</strong></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>

<span class="token keyword">class</span> <span class="token class-name">ChildCom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æˆ‘çš„åå­—æ˜¯</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,ä»Šå¹´</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">å²äº†</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ChildCom<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

ChildCom<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'null'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCom</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>frank<span class="token punctuation">"</span></span> <span class="token attr-name">age</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">22</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCom</span></span> <span class="token attr-name">age</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">24</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="custom-container details"><summary>è¿™æ ·å†™ä¹Ÿæ˜¯å¯ä»¥çš„</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>

<span class="token keyword">class</span> <span class="token class-name">ChildCom</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'null'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æˆ‘çš„åå­—æ˜¯</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,ä»Šå¹´</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">å²äº†</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCom</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>frank<span class="token punctuation">"</span></span> <span class="token attr-name">age</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">22</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCom</span></span> <span class="token attr-name">age</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">24</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ChildCom</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<p>å¦‚æœä½ åœ¨å¸¸è§„å¼€å‘ä¸­ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œé‚£ä½ å¯èƒ½éœ€è¦åšä¸€äº›é€‚å½“çš„æ”¹åŠ¨ï¼Œä»¥ä¿è¯ <code v-pre>PropsTypes</code>åº”ç”¨æ­£å¸¸ã€‚</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HelloWorldComponent</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Hello, </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè¦æ·»åŠ <code v-pre>PropTypes</code>ï¼Œä½ å¯èƒ½éœ€è¦åœ¨å¯¼å‡ºä¹‹å‰ä»¥å•ç‹¬å£°æ˜çš„ä¸€ä¸ªå‡½æ•°çš„å½¢å¼ï¼Œå£°æ˜è¯¥ç»„ä»¶ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">HelloWorldComponent</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Hello, </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> HelloWorldComponent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€ï¼Œå¯ä»¥ç›´æ¥åœ¨ <code v-pre>HelloWorldComponent</code> ä¸Šæ·»åŠ  <code v-pre>PropTypes</code>ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>

<span class="token keyword">function</span> <span class="token function">HelloWorldComponent</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Hello, </span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span>

HelloWorldComponent<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> HelloWorldComponent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å­ç»„ä»¶ä¼ é€’çˆ¶ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#å­ç»„ä»¶ä¼ é€’çˆ¶ç»„ä»¶" aria-hidden="true">#</a> å­ç»„ä»¶ä¼ é€’çˆ¶ç»„ä»¶</h3>
<p>åœ¨ <code v-pre>React </code>ä¸­æ˜¯é€šè¿‡ <code v-pre>props </code>ä¼ é€’æ¶ˆæ¯ï¼Œåªæ˜¯è®©çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåœ¨å­ç»„ä»¶ä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°å³å¯ï¼›</p>
<details class="custom-container details"><summary>å­ä¼ çˆ¶</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">class</span> <span class="token class-name">Ibutton</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>age<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">></span></span><span class="token plain-text">
          ä¼ é€’
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Ibutton</span></span>
          <span class="token attr-name">increment</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<h3 id="åœ¨-react-ä¸­å®ç°-slot" tabindex="-1"><a class="header-anchor" href="#åœ¨-react-ä¸­å®ç°-slot" aria-hidden="true">#</a> åœ¨ React ä¸­å®ç° slot</h3>
<p><code v-pre>children</code>(å³ï¼šæ ‡ç­¾(ç»„ä»¶)å†…çš„å†…å®¹)è¢«é»˜è®¤æ·»åŠ åˆ°<code v-pre>props</code>ä¸Šï¼Œå¯ä»¥é€šè¿‡<code v-pre>this.props.children</code>è®¿é—®ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ª<code v-pre>children</code>ï¼Œé‚£ä¹ˆè¢«æ·»åŠ åˆ°<code v-pre>props</code>ä¸Šçš„æ˜¯ä¸€ä¸ª<code v-pre>children</code>æ•°ç»„</p>
<p>App.js</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">import</span> NavBar <span class="token keyword">from</span> <span class="token string">'./NavBar'</span>
<span class="token keyword">import</span> NavBar2 <span class="token keyword">from</span> <span class="token string">'./NavBar2'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">aaa</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">bbb</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">ccc</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavBar2</span></span>
          <span class="token attr-name">leftSlot</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">aaa</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">}</span></span>
          <span class="token attr-name">centerSlot</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">bbb</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">}</span></span>
          <span class="token attr-name">rightSlot</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">ccc</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">}</span></span>
        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavBar2</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸€ç§æ–¹å¼(è¿™ç§æ–¹å¼ä¼ é€’è¿‡å»çš„ <code v-pre>html </code>ç»“æ„ä¸èƒ½æ··ä¹±)</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">NavBar</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> children <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav_item nav_left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav_item nav_center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>children<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav_item nav_right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>children<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒç§æ–¹å¼(<strong>æ¨è</strong>)ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">NavBar</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> leftSlot<span class="token punctuation">,</span> centerSlot<span class="token punctuation">,</span> rightSlot <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav_item nav_left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>leftSlot<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav_item nav_center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>centerSlot<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nav_item nav_right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>rightSlot<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•ˆæœå›¾ï¼š</p>
<p><img src="https://zfh-nanjing-bucket.oss-cn-nanjing.aliyuncs.com/blog-images/åœ¨Reactä¸­å®ç°Slot.jpg" alt="åœ¨Reactä¸­å®ç°Slot" loading="lazy"></p>
<h3 id="context-è·¨ç»„ä»¶é€šä¿¡" tabindex="-1"><a class="header-anchor" href="#context-è·¨ç»„ä»¶é€šä¿¡" aria-hidden="true">#</a> Context(è·¨ç»„ä»¶é€šä¿¡)</h3>
<p><a href="https://zh-hans.reactjs.org/docs/jsx-in-depth.html#spread-attributes" target="_blank" rel="noopener noreferrer">çŸ¥è¯†ç‚¹æ‰©å……ï¼šå±æ€§å±•å¼€<ExternalLinkIcon/></a></p>
<p><a href="https://zh-hans.reactjs.org/docs/context.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£ï¼šContext<ExternalLinkIcon/></a></p>
<h4 id="context-åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#context-åº”ç”¨åœºæ™¯" aria-hidden="true">#</a> Context åº”ç”¨åœºæ™¯</h4>
<p>éçˆ¶å­ç»„ä»¶æ•°æ®çš„å…±äº«ï¼š</p>
<ul>
<li>åœ¨å¼€å‘ä¸­ï¼Œæ¯”è¾ƒå¸¸è§çš„æ•°æ®ä¼ é€’æ–¹å¼æ˜¯é€šè¿‡ <code v-pre>props</code>å±æ€§è‡ªä¸Šè€Œä¸‹ï¼ˆç”±çˆ¶åˆ°å­ï¼‰è¿›è¡Œä¼ é€’</li>
<li>ä½†æ˜¯å¯¹äºæœ‰ä¸€äº›åœºæ™¯ï¼šæ¯”å¦‚ä¸€äº›æ•°æ®éœ€è¦åœ¨å¤šä¸ªç»„ä»¶ä¸­è¿›è¡Œå…±äº«ï¼ˆåœ°åŒºåå¥½ã€UI ä¸»é¢˜ã€ç”¨æˆ·ç™»å½•çŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯ç­‰ï¼‰</li>
<li>å¦‚æœæˆ‘ä»¬åœ¨é¡¶å±‚çš„ <code v-pre>App</code> ä¸­å®šä¹‰è¿™äº›ä¿¡æ¯ï¼Œä¹‹åä¸€å±‚å±‚ä¼ é€’ä¸‹å»ï¼Œé‚£ä¹ˆå¯¹äºä¸€äº›ä¸­é—´å±‚ä¸éœ€è¦æ•°æ®çš„ç»„ä»¶æ¥è¯´ï¼Œæ˜¯ä¸€ç§å†—ä½™çš„æ“ä½œ</li>
</ul>
<p>ä½†æ˜¯ï¼Œå¦‚æœå±‚çº§æ›´å¤šçš„è¯ï¼Œä¸€å±‚å±‚ä¼ é€’æ˜¯éå¸¸éº»çƒ¦ï¼Œå¹¶ä¸”ä»£ç æ˜¯éå¸¸å†—ä½™çš„ï¼š</p>
<ul>
<li><code v-pre>React</code> æä¾›äº†ä¸€ä¸ª <code v-pre>API</code>ï¼š<code v-pre>Context</code></li>
<li><code v-pre>Context</code> æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ­¤ç±»å€¼çš„æ–¹å¼ï¼Œè€Œä¸å¿…æ˜¾å¼åœ°é€šè¿‡ç»„ä»¶æ ‘çš„é€å±‚ä¼ é€’ <code v-pre>props</code></li>
<li><code v-pre>Context</code> è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºä¸€ä¸ªç»„ä»¶æ ‘è€Œè¨€æ˜¯â€œå…¨å±€â€çš„æ•°æ®ï¼Œä¾‹å¦‚å½“å‰è®¤è¯çš„ç”¨æˆ·ã€ä¸»é¢˜æˆ–é¦–é€‰è¯­è¨€</li>
</ul>
<h4 id="context-ç›¸å…³-api" tabindex="-1"><a class="header-anchor" href="#context-ç›¸å…³-api" aria-hidden="true">#</a> Context ç›¸å…³ API</h4>
<p><strong><code v-pre>React.createContext</code></strong></p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªéœ€è¦å…±äº«çš„ <code v-pre>Context</code> å¯¹è±¡</li>
<li>å½“ <code v-pre>React</code> æ¸²æŸ“ä¸€ä¸ªè®¢é˜…äº†è¿™ä¸ª <code v-pre>Context</code> å¯¹è±¡çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šä»ç¦»è‡ªèº«æœ€è¿‘çš„é‚£ä¸ªåŒ¹é…çš„ <code v-pre>Provider</code> ä¸­è¯»å–åˆ°å½“å‰çš„ <code v-pre>context</code> å€¼</li>
<li>å½“ç»„ä»¶æ²¡æœ‰åŒ¹é…åˆ° <code v-pre>Provider</code> æ—¶ï¼Œå…¶ <code v-pre>defaultValue</code> å‚æ•°æ‰ä¼šç”Ÿæ•ˆï¼ˆåªè¦åŒ¹é…åˆ°å°±ä¸ä¼šç”Ÿæ•ˆï¼Œå³ä½¿ä¸ä¼ é€’ valueï¼‰</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> MyContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">nickName</span><span class="token operator">:</span> <span class="token string">'null'</span><span class="token punctuation">,</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token comment">//é»˜è®¤å€¼)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong><code v-pre>Context.Provider</code></strong></p>
<ul>
<li>æ¯ä¸ª <code v-pre>Context</code> å¯¹è±¡éƒ½ä¼šè¿”å›ä¸€ä¸ª <code v-pre>Provider React</code> ç»„ä»¶ï¼Œå®ƒå…è®¸æ¶ˆè´¹ç»„ä»¶è®¢é˜… <code v-pre>context </code>çš„å˜åŒ–</li>
<li><code v-pre>Provider</code> æ¥æ”¶ä¸€ä¸ª <code v-pre>value</code> å±æ€§ï¼Œä¼ é€’ç»™æ¶ˆè´¹ç»„ä»¶</li>
<li>ä¸€ä¸ª <code v-pre>Provider</code> å¯ä»¥å’Œå¤šä¸ªæ¶ˆè´¹ç»„ä»¶æœ‰å¯¹åº”å…³ç³»</li>
<li>å¤šä¸ª <code v-pre>Provider</code> ä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œé‡Œå±‚çš„ä¼šè¦†ç›–å¤–å±‚çš„æ•°æ®(å¦‚éœ€ä½¿ç”¨å¤šä¸ª context è¯·ä½¿ç”¨<code v-pre>Context.Consumer</code>)</li>
<li>å½“ <code v-pre>Provider </code>çš„ <code v-pre>value</code> å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“</li>
</ul>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
                 </span><span class="token punctuation">{</span><span class="token comment">/*è¿™æ˜¯å­ç»„ä»¶(æ¶ˆè´¹ç»„ä»¶)*/</span><span class="token punctuation">}</span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List</span></span><span class="token punctuation">></span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyContext.Provider</span></span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>ä» Provider åˆ°å…¶å†…éƒ¨æ¶ˆè´¹ç»„ä»¶çš„ä¼ æ’­ä¸å—åˆ¶äº <code v-pre>shouldComponentUpdate</code> å‡½æ•°ï¼Œå› æ­¤å½“æ¶ˆè´¹ç»„ä»¶åœ¨å…¶ç¥–å…ˆç»„ä»¶è·³è¿‡æ›´æ–°çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ›´æ–°:</li>
</ul>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PureComponent<span class="token punctuation">,</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token comment">// åˆ›å»ºcontextå¯¹è±¡</span>
<span class="token keyword">const</span> MyContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">nickName</span><span class="token operator">:</span> <span class="token string">'null'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'list render'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">é¦–é¡µ</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">è´­ç‰©è½¦</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">æˆ‘çš„</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// contextä¸å—shouldComponentUpdateçš„æ§åˆ¶</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// userInfo ç»„ä»¶</span>
<span class="token keyword">class</span> <span class="token class-name">UserInfo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render,userinfo'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>color <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>nickName<span class="token punctuation">}</span><span class="token plain-text">,ç­‰çº§</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŒ‚è½½contextType(è¿™æ˜¯æ— æ³•ä½¿ç”¨å¤šä¸ªcontextçš„åŸå› )</span>
UserInfo<span class="token punctuation">.</span>contextType <span class="token operator">=</span> MyContext

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">nickName</span><span class="token operator">:</span> <span class="token string">'frank'</span><span class="token punctuation">,</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">1212299</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'app render'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyContext.Provider</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code v-pre>Class.contextType</code></strong></p>
<div class="custom-container warning">
<p class="custom-container-title">æ³¨æ„</p>
<p>å‡½æ•°å¼ç»„ä»¶æ— æ³•ä½¿ç”¨<code v-pre>Class.contextType</code></p>
</div>
<ul>
<li>æŒ‚è½½åœ¨ <code v-pre>class</code> ä¸Šçš„<code v-pre>contextType</code>å±æ€§ä¼šè¢«èµ‹å€¼ä¸ºä¸€ä¸ªç”± <code v-pre>React.createContext()</code> åˆ›å»ºçš„ <code v-pre>Context</code> å¯¹è±¡</li>
<li>è¿™èƒ½è®©ä½ ä½¿ç”¨ <code v-pre>this.context</code> æ¥æ¶ˆè´¹æœ€è¿‘ <code v-pre>Context</code> ä¸Šçš„é‚£ä¸ªå€¼</li>
<li>ä½ å¯ä»¥åœ¨ä»»ä½•ç”Ÿå‘½å‘¨æœŸä¸­è®¿é—®åˆ°å®ƒï¼ŒåŒ…æ‹¬ <code v-pre>render</code> å‡½æ•°ä¸­</li>
</ul>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>UserInfo<span class="token punctuation">.</span>contextType <span class="token operator">=</span> MyContext
<span class="token comment">// è¿™æ˜¯å­™ç»„ä»¶</span>
<span class="token keyword">class</span> <span class="token class-name">UserInfo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>color <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          ç”¨æˆ·åï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>nickName<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">ç­‰çº§:</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code v-pre>Context.Consumer</code></strong></p>
<div class="custom-container tip">
<p class="custom-container-title">ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ Context.Consumer å‘¢ï¼Ÿ</p>
<ul>
<li>å½“ä½¿ç”¨ value çš„ç»„ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶æ—¶</li>
<li>æˆ–è€…å½“ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨å¤šä¸ª Context æ—¶</li>
</ul>
</div>
<p>è¿™é‡Œéœ€è¦å‡½æ•°ä½œä¸ºå­å…ƒç´ <a href="https://zh-hans.reactjs.org/docs/jsx-in-depth.html#functions-as-children" target="_blank" rel="noopener noreferrer">function as child<ExternalLinkIcon/></a>è¿™ç§åšæ³•ï¼›ä¼ é€’ç»™å‡½æ•°çš„ <code v-pre>value</code> å€¼ç­‰ä»·äºç»„ä»¶æ ‘ä¸Šæ–¹ç¦»è¿™ä¸ª context æœ€è¿‘çš„ Provider æä¾›çš„ <code v-pre>value</code> å€¼</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyContext.Consumer</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">ç”¨æˆ·åï¼š</span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>nickName<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">ç­‰çº§:</span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyContext.Consumer</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¤šä¸ª-context" tabindex="-1"><a class="header-anchor" href="#å¤šä¸ª-context" aria-hidden="true">#</a> å¤šä¸ª Context</h4>
<details class="custom-container details"><summary>å…·ä½“ç¼–ç </summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token comment">// åˆ›å»ºcontextå¯¹è±¡</span>
<span class="token keyword">const</span> MyContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">nickName</span><span class="token operator">:</span> <span class="token string">'null'</span><span class="token punctuation">,</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> themeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserInfo</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserInfo</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">é¦–é¡µ</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">è´­ç‰©è½¦</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">æˆ‘çš„</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">UserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyContext.Consumer</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>themeContext.Consumer</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token punctuation">{</span><span class="token parameter">theme</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
                  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> theme<span class="token punctuation">.</span>color <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
                    ç”¨æˆ·åï¼š</span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>nickName<span class="token punctuation">}</span><span class="token plain-text">
                  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
                  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">ç­‰çº§:</span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
              <span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>themeContext.Consumer</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyContext.Consumer</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">nickName</span><span class="token operator">:</span> <span class="token string">'frank'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>themeContext.Provider</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'blue'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>themeContext.Provider</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyContext.Provider</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<h3 id="å…¨å±€äº‹ä»¶ä¼ é€’" tabindex="-1"><a class="header-anchor" href="#å…¨å±€äº‹ä»¶ä¼ é€’" aria-hidden="true">#</a> å…¨å±€äº‹ä»¶ä¼ é€’</h3>
<p>å‰é¢é€šè¿‡ Context ä¸»è¦å®ç°çš„æ˜¯æ•°æ®çš„å…±äº«ï¼Œä½†æ˜¯åœ¨å¼€å‘ä¸­å¦‚æœæœ‰è·¨ç»„ä»¶ä¹‹é—´çš„äº‹ä»¶ä¼ é€’ï¼Œåº”è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼Ÿ</p>
<ul>
<li>åœ¨ Vue ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ Vue çš„å®ä¾‹ï¼Œå¿«é€Ÿå®ç°ä¸€ä¸ªäº‹ä»¶æ€»çº¿ï¼ˆEventBusï¼‰ï¼Œæ¥å®Œæˆæ“ä½œ</li>
<li>åœ¨ React ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¾èµ–ä¸€ä¸ªä½¿ç”¨è¾ƒå¤šçš„åº“ events æ¥å®Œæˆå¯¹åº”çš„æ“ä½œ</li>
</ul>
<p>å®‰è£…ï¼š<code v-pre>yarn add events</code></p>
<p>events å¸¸ç”¨çš„ APIï¼š</p>
<ul>
<li>åˆ›å»º EventEmitter å¯¹è±¡:const eventBus =new EventEmitter()</li>
<li>å‘å‡ºäº‹ä»¶ï¼ševentBus.emit(&quot;äº‹ä»¶åç§°&quot;, å‚æ•°åˆ—è¡¨)</li>
<li>ç›‘å¬äº‹ä»¶ï¼ševentBus.addListener(&quot;äº‹ä»¶åç§°&quot;, ç›‘å¬å‡½æ•°)</li>
<li>ç§»é™¤äº‹ä»¶ï¼ševentBus.removeListener(&quot;äº‹ä»¶åç§°&quot;, ç›‘å¬å‡½æ•°)</li>
</ul>
<details class="custom-container details"><summary>events æ¡ˆä¾‹</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> EventEmitter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'events'</span>

<span class="token keyword">const</span> eventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MainBanner</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MainBanner</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eventBus<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">'helloMainBanner'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        num<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eventBus<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span><span class="token string">'helloMainBanner'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">88888</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Main</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">helloMainBanner</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          helloMainBanner
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">helloMainBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eventBus<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'helloMainBanner'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num<span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<h2 id="setstate" tabindex="-1"><a class="header-anchor" href="#setstate" aria-hidden="true">#</a> setState</h2>
<p><a href="https://zh-hans.reactjs.org/docs/react-component.html#setstate" target="_blank" rel="noopener noreferrer">setState API<ExternalLinkIcon/></a></p>
<h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨-setstate" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆä½¿ç”¨-setstate" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆä½¿ç”¨ SetState</h3>
<p>å¼€å‘ä¸­æˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥é€šè¿‡ä¿®æ”¹ <code v-pre>state</code> çš„å€¼æ¥è®©ç•Œé¢å‘ç”Ÿæ›´æ–°:</p>
<ul>
<li>å› ä¸ºæˆ‘ä»¬ä¿®æ”¹äº† <code v-pre>state </code>ä¹‹åï¼Œå¸Œæœ› <code v-pre>React</code> æ ¹æ®æœ€æ–°çš„ <code v-pre>State</code> æ¥é‡æ–°æ¸²æŸ“ç•Œé¢ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼çš„ä¿®æ”¹ <code v-pre>React</code> å¹¶ä¸çŸ¥é“æ•°æ®å‘ç”Ÿäº†å˜åŒ–</li>
<li><code v-pre>React</code> å¹¶æ²¡æœ‰å®ç°ç±»ä¼¼äº <code v-pre>Vue2</code> ä¸­çš„ <code v-pre>Object.defineProperty</code> æˆ–è€… <code v-pre>Vue3</code> ä¸­çš„ <code v-pre>Proxy </code>çš„æ–¹å¼æ¥ç›‘å¬æ•°æ®çš„å˜åŒ–</li>
<li>æˆ‘ä»¬å¿…é¡»é€šè¿‡ <code v-pre>setState</code> æ¥å‘ŠçŸ¥ <code v-pre>React</code> æ•°æ®å·²ç»å‘ç”Ÿäº†å˜åŒ–</li>
</ul>
<p>åœ¨ç»„ä»¶ä¸­å¹¶æ²¡æœ‰å®ç° <code v-pre>setState</code> çš„æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆå¯ä»¥è°ƒç”¨å‘¢? åŸå› å¾ˆç®€å•ï¼Œ<code v-pre>setState</code> æ–¹æ³•æ˜¯ä» <code v-pre>Component</code> ä¸­ç»§æ‰¿è¿‡æ¥çš„</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setState</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">partialState<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ReactæºğŸ</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="setstate-å¼‚æ­¥æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#setstate-å¼‚æ­¥æ›´æ–°" aria-hidden="true">#</a> setState å¼‚æ­¥æ›´æ–°</h3>
<p><code v-pre>setState</code> çš„æ›´æ–°æ˜¯å¼‚æ­¥çš„?</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">æ”¹å˜æ–‡æœ¬</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello,world'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token comment">// hello</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>æœ€ç»ˆæ‰“å°ç»“æœæ˜¯ <code v-pre>hello</code></li>
<li>å¯è§ <code v-pre>setState</code> æ˜¯å¼‚æ­¥çš„æ“ä½œï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½åœ¨æ‰§è¡Œå®Œ <code v-pre>setState</code> ä¹‹å<strong>ç«‹é©¬æ‹¿åˆ°</strong>æœ€æ–°çš„ <code v-pre>state</code> çš„ç»“æœ</li>
</ul>
<p>ä¸ºä»€ä¹ˆ <code v-pre>setState</code> è®¾è®¡ä¸ºå¼‚æ­¥å‘¢?</p>
<ul>
<li><code v-pre>setState</code> è®¾è®¡ä¸ºå¼‚æ­¥ï¼Œå¯ä»¥æ˜¾è‘—çš„æå‡æ€§èƒ½:å¦‚æœæ¯æ¬¡è°ƒç”¨ <code v-pre>setState</code> éƒ½è¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼Œé‚£ä¹ˆæ„å‘³ç€ <code v-pre>render</code> å‡½æ•°ä¼šè¢«é¢‘ç¹è°ƒç”¨ï¼Œç•Œé¢é‡æ–°æ¸²æŸ“ï¼Œè¿™æ ·æ•ˆç‡æ˜¯å¾ˆä½çš„;æœ€å¥½çš„åŠæ³•åº”è¯¥æ˜¯è·å–åˆ°å¤šä¸ªæ›´æ–°ï¼Œä¹‹åè¿›è¡Œæ‰¹é‡æ›´æ–°</li>
<li>å¦‚æœåŒæ­¥æ›´æ–°äº† <code v-pre>state</code>ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æ‰§è¡Œ <code v-pre>render</code> å‡½æ•°ï¼Œé‚£ä¹ˆ <code v-pre>state</code> å’Œ <code v-pre>props</code> ä¸èƒ½ä¿æŒåŒæ­¥ã€‚<strong><code v-pre>state</code> å’Œ <code v-pre>props</code> ä¸èƒ½ä¿æŒä¸€è‡´æ€§ï¼Œä¼šåœ¨å¼€å‘ä¸­äº§ç”Ÿå¾ˆå¤šçš„é—®é¢˜</strong></li>
</ul>
<h3 id="å¦‚ä½•è·å–å¼‚æ­¥çš„ç»“æœ" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•è·å–å¼‚æ­¥çš„ç»“æœ" aria-hidden="true">#</a> å¦‚ä½•è·å–å¼‚æ­¥çš„ç»“æœ</h3>
<p>æ–¹å¼ä¸€:<code v-pre>setState</code> çš„å›è°ƒ</p>
<ul>
<li><code v-pre>setState</code> æ¥å—ä¸¤ä¸ªå‚æ•°:ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šåœ¨æ›´æ–°åä¼šæ‰§è¡Œ</li>
<li>æ ¼å¼å¦‚ä¸‹:<code v-pre>setState(partialState, callback)</code></li>
</ul>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello,world'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–¹å¼äºŒï¼šç”Ÿå‘½å‘¨æœŸå‡½æ•°<code v-pre>componentDidUpdate</code></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code>    <span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token parameter">prevProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'componentDidUpdate'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="setstate-ä¸€å®šæ˜¯å¼‚æ­¥å—" tabindex="-1"><a class="header-anchor" href="#setstate-ä¸€å®šæ˜¯å¼‚æ­¥å—" aria-hidden="true">#</a> setState ä¸€å®šæ˜¯å¼‚æ­¥å—?</h3>
<p><a href="https://www.jianshu.com/p/8d8f9aa4b033" target="_blank" rel="noopener noreferrer">æ‰©å±•é˜…è¯»ï¼šReact åˆæˆäº‹ä»¶å’ŒåŸç”Ÿäº‹ä»¶çš„åŒºåˆ«<ExternalLinkIcon/></a></p>
<ul>
<li>åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæˆ– <code v-pre>React</code> åˆæˆäº‹ä»¶ä¸­ï¼Œ<code v-pre>setState</code> æ˜¯å¼‚æ­¥çš„</li>
<li>åœ¨ <code v-pre>setTimeout</code> æˆ–è€…åŸç”Ÿ <code v-pre>dom</code> äº‹ä»¶ä¸­ï¼Œ<code v-pre>setState</code> æ˜¯åŒæ­¥çš„</li>
</ul>
<h3 id="æ•°æ®çš„åˆå¹¶" tabindex="-1"><a class="header-anchor" href="#æ•°æ®çš„åˆå¹¶" aria-hidden="true">#</a> æ•°æ®çš„åˆå¹¶</h3>
<p>å½“è°ƒç”¨<code v-pre>setState</code>æ—¶ï¼Œå¹¶ä¸ä¼šè¦†ç›–ä¹‹å‰çš„<code v-pre>state</code>,<code v-pre>React</code>åº•å±‚é€šè¿‡<code v-pre>Object.assign</code>è¿›è¡Œåˆå¹¶</p>
<p>æ¯”å¦‚ï¼š{name:'zhang',age:23},ä¿®æ”¹ age å¹¶ä¸ä¼šå¯¹ name é€ æˆå½±å“</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'frank'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// ä½¿ç”¨setStateæ”¹å˜age</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// åº•å±‚è°ƒç”¨ï¼šObject.assign({},prevState,partialStatte)</span>
<span class="token comment">// å³ç›¸å½“äºï¼š</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zhang'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">23</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">24</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¤šä¸ª-state-çš„åˆå¹¶" tabindex="-1"><a class="header-anchor" href="#å¤šä¸ª-state-çš„åˆå¹¶" aria-hidden="true">#</a> å¤šä¸ª state çš„åˆå¹¶</h3>
<p>å¦‚ä¸‹ä»£ç ï¼Œ<code v-pre>count</code>å¹¶ä¸ä¼šç´¯åŠ ,åè°ƒç”¨çš„ <code v-pre>setState()</code> å°†è¦†ç›–åŒä¸€å‘¨æœŸå†…å…ˆè°ƒç”¨ <code v-pre>setState</code> çš„å€¼,å› æ­¤<code v-pre>count</code>åªå¢åŠ  1</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//    ç›¸å½“äº:</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>
  previousState<span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœåç»­çŠ¶æ€å–å†³äºå½“å‰çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨<code v-pre>updater</code>å‡½æ•°çš„å½¢å¼ä»£æ›¿ï¼š</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> state<span class="token punctuation">.</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> state<span class="token punctuation">.</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span> state<span class="token punctuation">.</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// +3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="react-çš„æ›´æ–°æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#react-çš„æ›´æ–°æœºåˆ¶" aria-hidden="true">#</a> React çš„æ›´æ–°æœºåˆ¶</h2>
<ul>
<li>
<p><code v-pre>react</code>çš„æ¸²æŸ“æµç¨‹ï¼š<code v-pre>jsx</code>---&gt;è™šæ‹Ÿ<code v-pre>DOM</code>---&gt;çœŸå®<code v-pre>DOM</code></p>
</li>
<li>
<p><code v-pre>react</code>çš„æ›´æ–°æµç¨‹ï¼š</p>
</li>
</ul>
<p><code v-pre>props</code>/<code v-pre>state</code>çš„æ”¹å˜---&gt;<code v-pre>render</code>å‡½æ•°é‡æ–°æ‰§è¡Œ----&gt;äº§ç”Ÿæ–°çš„è™šæ‹Ÿ DOM---&gt;æ–°æ—§è™šæ‹Ÿ<code v-pre>DOM</code>è¿›è¡Œ<code v-pre>diff</code>---&gt;è®¡ç®—å‡ºå·®å¼‚è¿›è¡Œæ›´æ–°ï¼ˆpatchï¼‰----&gt;æ›´æ–°åˆ°çœŸå®çš„<code v-pre>DOM</code></p>
<h2 id="react-æ€§èƒ½ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#react-æ€§èƒ½ä¼˜åŒ–" aria-hidden="true">#</a> React æ€§èƒ½ä¼˜åŒ–</h2>
<h3 id="åˆ—è¡¨ä¸­-keys-çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#åˆ—è¡¨ä¸­-keys-çš„ä½œç”¨" aria-hidden="true">#</a> åˆ—è¡¨ä¸­ keys çš„ä½œç”¨</h3>
<p>åœ¨éå†åˆ—è¡¨æ—¶ï¼Œæ€»æ˜¯ä¼šæç¤ºä¸€ä¸ªè­¦å‘Šï¼Œè®©æˆ‘ä»¬åŠ å…¥ä¸€ä¸ª<code v-pre>key</code>å±æ€§</p>
<h4 id="æ–¹å¼ä¸€-åœ¨æœ€åä½ç½®æ’å…¥æ•°æ®" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼ä¸€-åœ¨æœ€åä½ç½®æ’å…¥æ•°æ®" aria-hidden="true">#</a> æ–¹å¼ä¸€:åœ¨æœ€åä½ç½®æ’å…¥æ•°æ®</h4>
<p>è¿™ç§æƒ…å†µï¼Œæœ‰æ—  <code v-pre>key</code> æ„ä¹‰å¹¶ä¸å¤§</p>
<h4 id="æ–¹å¼äºŒ-åœ¨å‰é¢æ’å…¥æ•°æ®" tabindex="-1"><a class="header-anchor" href="#æ–¹å¼äºŒ-åœ¨å‰é¢æ’å…¥æ•°æ®" aria-hidden="true">#</a> æ–¹å¼äºŒ:åœ¨å‰é¢æ’å…¥æ•°æ®</h4>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="language-text"><code>&lt;ul>
&lt;li key='333'>333&lt;/li>
&lt;li key='111'>111&lt;/li>
&lt;li key='222'>222&lt;/li>
&lt;/ul>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>è¿™ç§åšæ³•ï¼Œåœ¨æ²¡æœ‰ <code v-pre>key</code> çš„æƒ…å†µä¸‹ï¼Œåˆ—è¡¨ä¸­æ‰€æœ‰çš„å­å…ƒç´ éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹</li>
<li>å½“å­å…ƒç´ æ‹¥æœ‰ <code v-pre>key</code> æ—¶ï¼Œ<code v-pre>React</code> ä½¿ç”¨ <code v-pre>key</code> æ¥åŒ¹é…åŸæœ‰æ ‘ä¸Šçš„å­å…ƒç´ ä»¥åŠæœ€æ–°æ ‘ä¸Šçš„å­å…ƒç´ ,<code v-pre>key</code> ä¸º 111 å’Œ 222 çš„å…ƒç´ ä»…ä»…è¿›è¡Œä½ç§»ï¼Œä¸éœ€è¦è¿›è¡Œä»»ä½•çš„ä¿®æ”¹;å°† <code v-pre>key</code> ä¸º 333 çš„å…ƒç´ æ’å…¥åˆ°æœ€å‰é¢çš„ä½ç½®å³å¯</li>
</ul>
<h4 id="key-çš„æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#key-çš„æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> key çš„æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><code v-pre>key</code> åº”è¯¥æ˜¯å”¯ä¸€çš„</li>
<li><code v-pre>key</code> ä¸è¦ä½¿ç”¨éšæœºæ•°(éšæœºæ•°åœ¨ä¸‹ä¸€æ¬¡ <code v-pre>render</code> æ—¶ï¼Œä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ•°å­—)</li>
<li>ä½¿ç”¨ <code v-pre>index</code> ä½œä¸º <code v-pre>key</code>ï¼Œå¯¹æ€§èƒ½æ˜¯æ²¡æœ‰ä¼˜åŒ–çš„</li>
</ul>
<h3 id="shouldcomponentupdate" tabindex="-1"><a class="header-anchor" href="#shouldcomponentupdate" aria-hidden="true">#</a> shouldComponentUpdate</h3>
<p>åªè¦æ˜¯ä¿®æ”¹äº† App ä¸­çš„æ•°æ®ï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½éœ€è¦é‡æ–° renderï¼Œè¿›è¡Œ diff ç®—æ³•ï¼Œæ€§èƒ½å¿…ç„¶æ˜¯å¾ˆä½çš„</p>
<p>äº‹å®ä¸Šï¼Œå¾ˆå¤šçš„ç»„ä»¶æ²¡æœ‰å¿…é¡»è¦é‡æ–° renderï¼›å®ƒä»¬è°ƒç”¨ render åº”è¯¥æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯ä¾èµ–çš„æ•°æ®ï¼ˆstateã€ propsï¼‰å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå†è°ƒç”¨è‡ªå·±çš„ render æ–¹æ³•</p>
<p>å¦‚ä½•æ¥æ§åˆ¶ render æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨å‘¢ï¼Ÿé€šè¿‡ shouldComponentUpdate æ–¹æ³•å³å¯</p>
<p>è¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>å‚æ•°ä¸€ï¼šnextProps ï¼Œä¿®æ”¹ä¹‹åï¼Œæœ€æ–°çš„ props å±æ€§</li>
<li>å‚æ•°äºŒï¼šnextState ï¼Œä¿®æ”¹ä¹‹åï¼Œæœ€æ–°çš„ state å±æ€§</li>
</ul>
<p>è¯¥æ–¹æ³•è¿”å›å€¼æ˜¯ä¸€ä¸ª boolean ç±»å‹ï¼š</p>
<ul>
<li>è¿”å›å€¼ä¸º trueï¼Œé‚£ä¹ˆå°±éœ€è¦è°ƒç”¨ render æ–¹æ³•</li>
<li>è¿”å›å€¼ä¸º falseï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦è°ƒç”¨ render æ–¹æ³•</li>
<li>é»˜è®¤è¿”å›çš„æ˜¯ trueï¼Œä¹Ÿå°±æ˜¯åªè¦ state å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šè°ƒç”¨ render æ–¹æ³•</li>
</ul>
<h3 id="purecomponent" tabindex="-1"><a class="header-anchor" href="#purecomponent" aria-hidden="true">#</a> PureComponent</h3>
<p>å¦‚æœæ‰€æœ‰çš„ç±»ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨æ¥å®ç° shouldComponentUpdateï¼Œè¿™æ ·åšæ˜¯å¾ˆéº»çƒ¦çš„</p>
<p>æˆ‘ä»¬æ¥è®¾æƒ³ä¸€ä¸‹ shouldComponentUpdate ä¸­çš„å„ç§åˆ¤æ–­çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><strong>props æˆ–è€… state ä¸­çš„æ•°æ®æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œæ¥å†³å®š shouldComponentUpdate è¿”å› true æˆ–è€… false</strong></p>
<p>äº‹å®ä¸Š React å·²ç»è€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥ React å·²ç»é»˜è®¤å¸®æˆ‘ä»¬å®ç°å¥½äº†ï¼Œå¦‚ä½•å®ç°å‘¢ï¼Ÿ å°† class ç»§æ‰¿è‡ª PureComponent</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">movie</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'æµæµªåœ°çƒ'</span><span class="token punctuation">,</span> <span class="token string">'é•¿æ´¥æ¹–'</span><span class="token punctuation">,</span> <span class="token string">'ä¿¡æ¡'</span><span class="token punctuation">,</span> <span class="token string">'è‚–ç”Ÿå®¢çš„æ•‘èµ'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// shouldComponentUpdate(nextProps, nextState, nextContext) {</span>
  <span class="token comment">//     return nextState.movie !== this.state.movie</span>
  <span class="token comment">// }</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>movie<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">++++</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç›´æ¥ä¿®æ”¹æ•°æ®</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>movie<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'å¥‡è¿¹ç¬¨å°å­©'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">movie</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>movie<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// æ­£ç¡®åšæ³•ï¼ˆæ–°æ•°æ®æ›¿æ¢æ—§æ•°æ®ï¼‰</span>
    <span class="token comment">// this.setState({</span>
    <span class="token comment">//     movie: [...this.state.movie,'å¥‡è¿¹ç¬¨å°å­©'],</span>
    <span class="token comment">// })</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œç”µå½±åˆ—è¡¨å¹¶æ²¡æœ‰æ›´æ–°ã€‚é—®é¢˜åœ¨äº <code v-pre>PureComponent</code> ä»…ä»…ä¼šå¯¹æ–°è€ <code v-pre>this.state.movie</code> çš„å€¼è¿›è¡Œç®€å•çš„å¯¹æ¯”ã€‚ç”±äºä»£ç ä¸­ <code v-pre>add</code> æ–¹æ³•æ”¹å˜äº†åŒä¸€ä¸ª <code v-pre>movie</code> æ•°ç»„ï¼Œä½¿å¾—æ–°è€ <code v-pre>this.state.movie</code> æ¯”è¾ƒçš„å…¶å®è¿˜æ˜¯åŒä¸€ä¸ªæ•°ç»„ã€‚å³ä¾¿å®é™…ä¸Šæ•°ç»„ä¸­çš„å†…å®¹å·²ç»å˜äº†ï¼Œä½†æ˜¯æ¯”è¾ƒç»“æœæ˜¯ç›¸åŒçš„ã€‚ æ‰€ä»¥<a href="https://zh-hans.reactjs.org/tutorial/tutorial.html#why-immutability-is-important" target="_blank" rel="noopener noreferrer">ä¸å¯å˜æ€§åœ¨ React ä¸­éå¸¸é‡è¦<ExternalLinkIcon/></a></p>
<h3 id="é«˜é˜¶ç»„ä»¶-memo" tabindex="-1"><a class="header-anchor" href="#é«˜é˜¶ç»„ä»¶-memo" aria-hidden="true">#</a> é«˜é˜¶ç»„ä»¶ memo</h3>
<p>å¦‚ä½•è®©å‡½æ•°ç»„ä»¶å®ç°å’Œ<code v-pre>PureComponent</code>ç›¸åŒçš„åŠŸèƒ½å‘¢ï¼Ÿæ­¤æ—¶éœ€è¦ä½¿ç”¨ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ memo</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> memo<span class="token punctuation">,</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token comment">// header</span>
<span class="token keyword">const</span> MemoHeader <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'header'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">è¿™æ˜¯header</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// main</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MainBanner</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MainProductList</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//  main banner</span>
<span class="token keyword">function</span> <span class="token function">MainBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mainbanner'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">è½®æ’­å›¾ç»„ä»¶</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span>

<span class="token comment">// main productList</span>
<span class="token keyword">function</span> <span class="token function">MainProductList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mainproductlist'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">3</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// footer</span>
<span class="token keyword">function</span> <span class="token function">Footer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'footer'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">è¿™æ˜¯footerç»„ä»¶</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MemoHeader</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Main</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Footer</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">numplus</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">num+++</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">numplus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">num</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>header ç»„ä»¶ä½¿ç”¨ memo è¿›è¡Œäº†åŒ…è£¹ï¼Œè€Œ footer ç»„ä»¶æ²¡æœ‰</p>
<p>å½“æˆ‘ä»¬æ”¹å˜ APP ä¸­çš„ num çš„å€¼æ—¶ï¼Œfooter ç»„ä»¶é‡æ–° render äº†ï¼Œè€Œ header ç»„ä»¶å¹¶æ²¡æœ‰é‡æ–° render
MainBannerã€MainProductList ç»„ä»¶æ²¡æœ‰ä½¿ç”¨ memo è¿›è¡ŒåŒ…è£¹ï¼Œä¸ºä»€ä¹ˆä¹Ÿæ²¡æœ‰é‡æ–° renderï¼Ÿå¼•æ–‡ä»–ä»¬çš„çˆ¶ç»„ä»¶ Main ç»§æ‰¿è‡ª PureComponent</p>
<h2 id="refs" tabindex="-1"><a class="header-anchor" href="#refs" aria-hidden="true">#</a> refs</h2>
<p><a href="https://zh-hans.reactjs.org/docs/refs-and-the-dom.html#gatsby-focus-wrapper" target="_blank" rel="noopener noreferrer">details<ExternalLinkIcon/></a></p>
<p>åœ¨ React çš„å¼€å‘æ¨¡å¼ä¸­ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸éœ€è¦ã€ä¹Ÿä¸å»ºè®®ç›´æ¥æ“ä½œ DOMï¼Œä½†æ˜¯æŸäº›ç‰¹æ®Šçš„æƒ…å†µï¼Œç¡®å®éœ€è¦è·å–åˆ° DOM è¿›è¡ŒæŸäº›æ“ä½œ</p>
<p>å¦‚ä½•åˆ›å»º refs æ¥è·å–å¯¹åº”çš„ DOM å‘¢ï¼Ÿç›®å‰æœ‰ä¸‰ç§æ–¹å¼ï¼š</p>
<ul>
<li>
<p>æ–¹å¼ä¸€(åºŸå¼ƒ)ï¼šä¼ å…¥å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ—¶é€šè¿‡ this.refs ä¼ å…¥çš„å­—ç¬¦ä¸²æ ¼å¼è·å–å¯¹åº”çš„å…ƒç´ </p>
</li>
<li>
<p>æ–¹å¼äºŒ(æ¨è)ï¼šä¼ å…¥ä¸€ä¸ªå¯¹è±¡,å¯¹è±¡æ˜¯é€šè¿‡ React.createRef() æ–¹å¼åˆ›å»ºå‡ºæ¥çš„ï¼›ä½¿ç”¨æ—¶è·å–åˆ°åˆ›å»ºçš„å¯¹è±¡å…¶ä¸­æœ‰ä¸€ä¸ª current å±æ€§å°±æ˜¯å¯¹åº”çš„å…ƒç´ </p>
</li>
<li>
<p>æ–¹å¼ä¸‰ï¼šä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ DOM è¢«æŒ‚è½½æ—¶è¿›è¡Œå›è°ƒï¼Œè¿™ä¸ªå‡½æ•°ä¼šä¼ å…¥ä¸€ä¸ªå…ƒç´ å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±ä¿å­˜ï¼›ä½¿ç”¨æ—¶ï¼Œç›´æ¥æ‹¿åˆ°ä¹‹å‰ä¿å­˜çš„å…ƒç´ å¯¹è±¡å³å¯</p>
</li>
</ul>
<p>ref çš„å€¼æ ¹æ®èŠ‚ç‚¹çš„ç±»å‹è€Œæœ‰æ‰€ä¸åŒï¼š</p>
<ul>
<li>
<p>å½“ ref å±æ€§ç”¨äº HTML å…ƒç´ æ—¶ï¼Œæ„é€ å‡½æ•°ä¸­ä½¿ç”¨ React.createRef() åˆ›å»ºçš„ ref æ¥æ”¶åº•å±‚ DOM å…ƒç´ ä½œä¸ºå…¶ current å±æ€§</p>
</li>
<li>
<p>å½“ ref å±æ€§ç”¨äºè‡ªå®šä¹‰ class ç»„ä»¶æ—¶ï¼Œref å¯¹è±¡æ¥æ”¶ç»„ä»¶çš„æŒ‚è½½å®ä¾‹ä½œä¸ºå…¶ current å±æ€§</p>
</li>
<li>
<p>ä½ ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰å®ä¾‹ã€‚</p>
</li>
</ul>
<CodePen
  link="https://codepen.io/zhangfanhang/pen/KKZrOev"
  :theme="$isDarkMode? 'dark': 'light'"
/>
<h3 id="ref-çš„è½¬å‘" tabindex="-1"><a class="header-anchor" href="#ref-çš„è½¬å‘" aria-hidden="true">#</a> ref çš„è½¬å‘</h3>
<p>å¦‚æœè¦åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ <code v-pre>ref</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://zh-hans.reactjs.org/docs/forwarding-refs.html" target="_blank" rel="noopener noreferrer"><code v-pre>forwardRef</code><ExternalLinkIcon/></a>æ¥è½¬å‘<code v-pre>ref</code></p>
<p>ä¸ç®¡æ€æ ·ï¼Œä½ å¯ä»¥<strong>åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ä½¿ç”¨ <code v-pre>ref</code> å±æ€§</strong>ï¼Œåªè¦å®ƒæŒ‡å‘ä¸€ä¸ª DOM å…ƒç´ æˆ– class ç»„ä»¶ï¼š</p>
<details class="custom-container details"><summary>è¯¦æƒ…</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRef<span class="token punctuation">,</span> forwardRef<span class="token punctuation">,</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> EnHome <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">æˆ‘æ˜¯Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>myRef <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EnHome</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">}</span></span> <span class="token attr-name">copName</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">'fuck'</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>myRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<h2 id="react-è¡¨å•å¤„ç†" tabindex="-1"><a class="header-anchor" href="#react-è¡¨å•å¤„ç†" aria-hidden="true">#</a> React è¡¨å•å¤„ç†</h2>
<p><a href="https://zh-hans.reactjs.org/docs/forms.html#controlled-components" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£:è¡¨å•<ExternalLinkIcon/></a></p>
<h3 id="æ³¨æ„ç‚¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„ç‚¹" aria-hidden="true">#</a> æ³¨æ„ç‚¹</h3>
<ul>
<li>select:React å¹¶ä¸ä¼šä½¿ç”¨ selected å±æ€§ï¼Œè€Œæ˜¯åœ¨æ ¹ select æ ‡ç­¾ä¸Šä½¿ç”¨ value å±æ€§,è¡¨ç¤ºé»˜è®¤é€‰ä¸­</li>
<li>å¤„ç†å¤šä¸ªè¾“å…¥å®˜ç½‘æ¡ˆä¾‹æ³¨æ„ checkbox çš„å¤„ç†é€»è¾‘</li>
</ul>
<h2 id="é«˜é˜¶ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#é«˜é˜¶ç»„ä»¶" aria-hidden="true">#</a> é«˜é˜¶ç»„ä»¶</h2>
<ul>
<li>é¦–å…ˆï¼Œ é«˜é˜¶ç»„ä»¶æœ¬èº«ä¸æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼›å…¶æ¬¡ï¼Œè¿™ä¸ªå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªç»„ä»¶</li>
<li>é«˜é˜¶ç»„ä»¶å¹¶ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼</li>
<li>ç”¨é€”ï¼š</li>
</ul>
<h3 id="åº”ç”¨-1-props-çš„å¢å¼º" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨-1-props-çš„å¢å¼º" aria-hidden="true">#</a> åº”ç”¨ 1:props çš„å¢å¼º</h3>
<p>ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ æ–°çš„ props:</p>
<details class="custom-container details"><summary>code</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">enhanceProps</span><span class="token punctuation">(</span><span class="token parameter">Comp<span class="token punctuation">,</span> otherProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comp</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>otherProps<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        æ˜µç§°ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>nickName<span class="token punctuation">}</span><span class="token plain-text">,ç­‰çº§ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token plain-text">,åŒºåŸŸï¼š
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>region<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">About</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        æ˜µç§°ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>nickName<span class="token punctuation">}</span><span class="token plain-text">,ç­‰çº§ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token plain-text">,åŒºåŸŸï¼š
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>region<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> EnhanceHome <span class="token operator">=</span> <span class="token function">enhanceProps</span><span class="token punctuation">(</span>Home<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">region</span><span class="token operator">:</span> <span class="token string">'china'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> EnhanceAbout <span class="token operator">=</span> <span class="token function">enhanceProps</span><span class="token punctuation">(</span>About<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">region</span><span class="token operator">:</span> <span class="token string">'US'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EnhanceHome</span></span> <span class="token attr-name">nickName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>frank<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>999<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EnhanceAbout</span></span> <span class="token attr-name">nickName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zhang<span class="token punctuation">"</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<p>åˆ©ç”¨é«˜é˜¶ç»„ä»¶æ¥å…±äº« Context:</p>
<details class="custom-container details"><summary>code</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token comment">//åˆ›å»ºcontext</span>

<span class="token keyword">const</span> UserContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//å®šä¹‰é«˜é˜¶ç»„ä»¶</span>

<span class="token keyword">function</span> <span class="token function">withUser</span><span class="token punctuation">(</span><span class="token parameter">Comp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserContext.Consumer</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comp</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>value<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserContext.Consumer</span></span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        æ˜µç§°ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>nickName<span class="token punctuation">}</span><span class="token plain-text">,ç­‰çº§ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token plain-text">,åŒºåŸŸï¼š
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>region<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">About</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        æ˜µç§°ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>nickName<span class="token punctuation">}</span><span class="token plain-text">,ç­‰çº§ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>level<span class="token punctuation">}</span><span class="token plain-text">,åŒºåŸŸï¼š
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>region<span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> EnhanceHome <span class="token operator">=</span> <span class="token function">withUser</span><span class="token punctuation">(</span>Home<span class="token punctuation">)</span>
<span class="token keyword">const</span> EnhanceAbout <span class="token operator">=</span> <span class="token function">withUser</span><span class="token punctuation">(</span>About<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserContext.Provider</span></span>
          <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">nickName</span><span class="token operator">:</span> <span class="token string">'frank'</span><span class="token punctuation">,</span> <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token string">'999'</span><span class="token punctuation">,</span> <span class="token literal-property property">region</span><span class="token operator">:</span> <span class="token string">'CN'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EnhanceHome</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EnhanceAbout</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserContext.Provider</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<h3 id="åº”ç”¨-2-æ¸²æŸ“åˆ¤æ–­é‰´æƒ" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨-2-æ¸²æŸ“åˆ¤æ–­é‰´æƒ" aria-hidden="true">#</a> åº”ç”¨ 2:æ¸²æŸ“åˆ¤æ–­é‰´æƒ</h3>
<p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼š</p>
<ul>
<li>æŸäº›é¡µé¢æ˜¯å¿…é¡»ç”¨æˆ·ç™»å½•æˆåŠŸæ‰èƒ½è¿›è¡Œè¿›å…¥</li>
<li>å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•æˆåŠŸï¼Œé‚£ä¹ˆç›´æ¥è·³è½¬åˆ°ç™»å½•é¡µé¢ï¼›</li>
</ul>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥å®Œæˆé‰´æƒæ“ä½œï¼š</p>
<CodePen
  link="https://codepen.io/zhangfanhang/pen/mdXEpdr"
  :theme="$isDarkMode? 'dark': 'light'"
/>
<h3 id="åº”ç”¨-3-ç”Ÿå‘½å‘¨æœŸåŠ«æŒ" tabindex="-1"><a class="header-anchor" href="#åº”ç”¨-3-ç”Ÿå‘½å‘¨æœŸåŠ«æŒ" aria-hidden="true">#</a> åº”ç”¨ 3:ç”Ÿå‘½å‘¨æœŸåŠ«æŒ</h3>
<p>åˆ©ç”¨é«˜é˜¶å‡½æ•°æ¥åŠ«æŒç”Ÿå‘½å‘¨æœŸï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸä¸­å®Œæˆè‡ªå·±çš„é€»è¾‘ï¼š</p>
<details class="custom-container details"><summary>code</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">function</span> <span class="token function">handleRenderTime</span><span class="token punctuation">(</span><span class="token parameter">Cop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">RenderTimeCop</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
    <span class="token function">UNSAFE_componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>beginTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> renderTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endTime <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>beginTime
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>copName <span class="token operator">+</span> <span class="token string">'ç»„ä»¶æ¸²æŸ“ç”¨äº†'</span> <span class="token operator">+</span> renderTime <span class="token operator">+</span> <span class="token string">'ms'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// props è½¬å‘ä¸‹å±‚</span>
    <span class="token comment">/**
     * é«˜é˜¶ç»„ä»¶==> è¿”å› Xxxx  ç»„ä»¶ ===> è¿”å›äº†ç»„ä»¶
     */</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Cop</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token punctuation">{</span><span class="token number">19999999999999999999999999999999999</span> <span class="token operator">*</span> <span class="token number">123</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
          asdaskdnasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjaasndjasndjasndjasndjasndjasnsjdnjnjasn
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">About</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">table</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'æµ·åº•æ'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">9816</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">8972</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'æˆéƒ½'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">8988</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">8437</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'ç‚­çƒ¤'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">9876</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">7622</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'å¸¸å·'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">9595</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">6981</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'éº¦ä¹é¸¡'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">8136</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">5779</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'ä¸Šæµ·'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">6789</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">5677</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'è‹å·'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">8070</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">5261</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'æ²ˆé˜³'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">8266</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">4925</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'å¤§è¿'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">8407</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">4819</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'æ°´æœ'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">6137</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">4769</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'å•†è¶…'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">7251</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">4393</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'é¢æ¡'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">8320</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">4188</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'å¹¿å·'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">6525</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">4184</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'éº¦å½“åŠ³'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">6927</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">3820</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'æ­å·'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">5505</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">3377</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'å‘¼å’Œæµ©ç‰¹'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">6687</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">2909</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'é‡åº†'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">2973</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">2155</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'æµå—'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">2457</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">1691</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'ç¾é£Ÿ'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">6080</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">1641</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'æ¸©å·'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1899</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">1486</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'éº»è¾£'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">3515</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">1046</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'è‚¯å¾·åŸº'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1823</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">808</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'é•¿æ˜¥'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">8549</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">806</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'å°é¾™è™¾'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">2243</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">628</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'å…¨å®¶æ¡¶'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1951</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">564</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'æ‹‰è¨'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">699</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">548</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'åŒ—äº¬'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">4917</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">545</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'é¸¡è…¿'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1710</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">506</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'å—äº¬'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1709</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">458</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'é€è¯'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">5384</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">344</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">word</span><span class="token operator">:</span> <span class="token string">'è·‘è…¿'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1224</span><span class="token punctuation">,</span>
          <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token number">319</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>table<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>user<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>word<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> EnHome <span class="token operator">=</span> <span class="token function">handleRenderTime</span><span class="token punctuation">(</span>Home<span class="token punctuation">)</span>
<span class="token keyword">const</span> EnAbout <span class="token operator">=</span> <span class="token function">handleRenderTime</span><span class="token punctuation">(</span>About<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EnHome</span></span> <span class="token attr-name">copName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">EnAbout</span></span> <span class="token attr-name">copName</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">'about'</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<h3 id="é«˜é˜¶ç»„ä»¶çš„æ„ä¹‰" tabindex="-1"><a class="header-anchor" href="#é«˜é˜¶ç»„ä»¶çš„æ„ä¹‰" aria-hidden="true">#</a> é«˜é˜¶ç»„ä»¶çš„æ„ä¹‰</h3>
<p>æˆ‘ä»¬ä¼šå‘ç°åˆ©ç”¨é«˜é˜¶ç»„ä»¶å¯ä»¥é’ˆå¯¹æŸäº› React ä»£ç è¿›è¡Œæ›´åŠ ä¼˜é›…çš„å¤„ç†ã€‚</p>
<p>å…¶å®æ—©æœŸçš„ React æœ‰æä¾›ç»„ä»¶ä¹‹é—´çš„ä¸€ç§å¤ç”¨æ–¹å¼æ˜¯ mixinï¼Œç›®å‰å·²ç»ä¸å†å»ºè®®ä½¿ç”¨ï¼š</p>
<ul>
<li>Mixin å¯èƒ½ä¼šç›¸äº’ä¾èµ–ï¼Œç›¸äº’è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤</li>
<li>ä¸åŒçš„ Mixin ä¸­çš„æ–¹æ³•å¯èƒ½ä¼šç›¸äº’å†²çª</li>
<li>Mixin éå¸¸å¤šæ—¶ï¼Œç»„ä»¶æ˜¯å¯ä»¥æ„ŸçŸ¥åˆ°çš„ï¼Œç”šè‡³è¿˜è¦ä¸ºå…¶åšç›¸å…³å¤„ç†ï¼Œè¿™æ ·ä¼šç»™ä»£ç é€ æˆæ»šé›ªçƒå¼çš„å¤æ‚æ€§</li>
</ul>
<p>å½“ç„¶ï¼ŒHOC ä¹Ÿæœ‰è‡ªå·±çš„ä¸€äº›ç¼ºé™·ï¼š</p>
<ul>
<li>HOC éœ€è¦åœ¨åŸç»„ä»¶ä¸Šè¿›è¡ŒåŒ…è£¹æˆ–è€…åµŒå¥—ï¼Œå¦‚æœå¤§é‡ä½¿ç”¨ HOCï¼Œå°†ä¼šäº§ç”Ÿéå¸¸å¤šçš„åµŒå¥—ï¼Œè¿™è®©è°ƒè¯•å˜å¾—éå¸¸å›°éš¾ï¼›</li>
<li>HOC å¯ä»¥åŠ«æŒ propsï¼Œåœ¨ä¸éµå®ˆçº¦å®šçš„æƒ…å†µä¸‹ä¹Ÿå¯èƒ½é€ æˆå†²çªï¼›</li>
</ul>
<p><strong>Hooks çš„å‡ºç°ï¼Œæ˜¯å¼€åˆ›æ€§çš„ï¼Œå®ƒè§£å†³äº†å¾ˆå¤š React ä¹‹å‰çš„å­˜åœ¨çš„é—®é¢˜</strong> æ¯”å¦‚ this æŒ‡å‘é—®é¢˜ã€æ¯”å¦‚ hoc çš„åµŒå¥—å¤æ‚åº¦é—®é¢˜ç­‰ç­‰</p>
<h2 id="portals-çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#portals-çš„ä½¿ç”¨" aria-hidden="true">#</a> Portals çš„ä½¿ç”¨</h2>
<p>æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æ¸²æŸ“çš„å†…å®¹ç‹¬ç«‹äºçˆ¶ç»„ä»¶ï¼Œç”šè‡³æ˜¯ç‹¬ç«‹äºå½“å‰æŒ‚è½½åˆ°çš„ DOM å…ƒç´ ä¸­ï¼ˆé»˜è®¤éƒ½æ˜¯æŒ‚è½½åˆ° id ä¸º root çš„ DOM å…ƒ ç´ ä¸Šçš„ï¼‰</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token comment">// createPortalæ˜¯ReactDOMçš„APIè€Œä¸æ˜¯Reactçš„API</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createPortal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span>domName<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ¡ˆä¾‹-modal" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-modal" aria-hidden="true">#</a> æ¡ˆä¾‹ï¼šModal</h3>
<p>å¼€å‘ä¸€ä¸ª Modal ç»„ä»¶ï¼Œå®ƒå¯ä»¥å°†å®ƒçš„å­ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•çš„ä¸­é—´ä½ç½®</p>
<details class="custom-container details"><summary>code</summary>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createPortal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token keyword">function</span> <span class="token function">Modal</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token function">createPortal</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'modal'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">æˆ‘æ˜¯å‚»é€¼</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>
<h2 id="fragment" tabindex="-1"><a class="header-anchor" href="#fragment" aria-hidden="true">#</a> fragment</h2>
<p>åœ¨ä¹‹å‰çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯åœ¨ä¸€ä¸ªç»„ä»¶ä¸­è¿”å›å†…å®¹æ—¶åŒ…è£¹ä¸€ä¸ª div å…ƒç´ </p>
<p>ä½¿ç”¨ Fragment åï¼Œæ— éœ€å‘ DOM æ·»åŠ é¢å¤–èŠ‚ç‚¹</p>
<p>React è¿˜æä¾›äº† Fragment çš„çŸ­è¯­æ³•</p>
<p>å®ƒçœ‹èµ·æ¥åƒç©ºæ ‡ç­¾<code v-pre> &lt;&gt; &lt;/&gt;</code></p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ Fragment ä¸­æ·»åŠ  keyï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä½¿ç”¨çŸ­è¯­æ³•</p>
<h2 id="strictmode" tabindex="-1"><a class="header-anchor" href="#strictmode" aria-hidden="true">#</a> StrictMode</h2>
<p>StrictMode æ˜¯ä¸€ä¸ªç”¨æ¥çªå‡ºæ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­æ½œåœ¨é—®é¢˜çš„å·¥å…·</p>
<p>ä¸ Fragment ä¸€æ ·ï¼ŒStrictMode ä¸ä¼šæ¸²æŸ“ä»»ä½•å¯è§çš„ UIï¼›</p>
<p>å®ƒä¸ºå…¶åä»£å…ƒç´ è§¦å‘é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Š</p>
<p>ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œï¼›å®ƒä»¬ä¸ä¼šå½±å“ç”Ÿäº§æ„å»º</p>
<h3 id="ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ä»€ä¹ˆ" aria-hidden="true">#</a> ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ä»€ä¹ˆï¼Ÿ</h3>
<ol>
<li>
<p>è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
</li>
<li>
<p>ä½¿ç”¨è¿‡æ—¶çš„ ref API</p>
</li>
<li>
<p>ä½¿ç”¨åºŸå¼ƒçš„ findDOMNode æ–¹æ³• ï¼š åœ¨ä¹‹å‰çš„ React API ä¸­ï¼Œå¯ä»¥é€šè¿‡ findDOMNode æ¥è·å– DOMï¼Œä¸è¿‡å·²ç»ä¸æ¨èä½¿ç”¨</p>
</li>
<li>
<p>æ£€æŸ¥æ„å¤–çš„å‰¯ä½œç”¨ï¼šè¿™ä¸ªç»„ä»¶çš„ constructor ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ï¼ˆ è¿™æ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹æ•…æ„è¿›è¡Œçš„æ“ä½œï¼Œè®©ä½ æ¥æŸ¥çœ‹åœ¨è¿™é‡Œå†™çš„ä¸€äº›é€»è¾‘ä»£ç è¢«è°ƒç”¨å¤šæ¬¡æ—¶ï¼Œæ˜¯å¦ä¼šäº§ç”Ÿä¸€äº›å‰¯ä½œç”¨ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ˜¯ä¸ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡çš„,åœ¨ react17 ä¸­ console.log åªè°ƒç”¨ä¸€æ¬¡ï¼‰</p>
</li>
<li>
<p>æ£€æµ‹è¿‡æ—¶çš„ context APIï¼šæ—©æœŸçš„ Context æ˜¯é€šè¿‡ static å±æ€§å£°æ˜ Context å¯¹è±¡å±æ€§ï¼Œé€šè¿‡ getChildContext è¿”å› Context å¯¹è±¡ç­‰æ–¹å¼æ¥ä½¿ç”¨ Context çš„ï¼› ç›®å‰è¿™ç§æ–¹å¼å·²ç»ä¸æ¨èä½¿ç”¨</p>
</li>
</ol>
<h2 id="render-props" tabindex="-1"><a class="header-anchor" href="#render-props" aria-hidden="true">#</a> render Props</h2>
<p><a href="https://zh-hans.reactjs.org/docs/render-props.html" target="_blank" rel="noopener noreferrer">RenderProps<ExternalLinkIcon/></a>ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯å°†ç»„ä»¶çš„ props æ¸²æŸ“å‡ºæ¥ã€‚å®é™…ä¸Šæ˜¯è®©ç»„ä»¶çš„ props æ¥æ”¶å‡½æ•°ï¼Œç”±å‡½æ•°æ¥æ¸²æŸ“å†…å®¹ã€‚å°†é€šç”¨çš„é€»è¾‘æŠ½è±¡åœ¨è¯¥ç»„ä»¶çš„å†…éƒ¨ï¼Œç„¶åä¾æ®ä¸šåŠ¡é€»è¾‘æ¥è°ƒç”¨å‡½æ•°ï¼ˆprops å†…æ¸²æŸ“å†…å®¹çš„å‡½æ•°ï¼‰ï¼Œä»è€Œè¾¾åˆ°é‡ç”¨é€»è¾‘çš„ç›®çš„ã€‚</p>
<p>renderProps ä¸æ˜¯æ–°çš„ APIï¼Œè€Œæ˜¯åˆ©ç”¨ React è‡ªèº«ç‰¹ç‚¹çš„ç¼–ç æŠ€å·§ï¼Œæ¼”åŒ–è€Œæˆçš„å›ºå®šæ¨¡å¼</p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> mouse <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>mouse
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K<span class="token punctuation">"</span></span>
        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">'100px'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'100px'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">left</span><span class="token operator">:</span> mouse<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
          <span class="token literal-property property">top</span><span class="token operator">:</span> mouse<span class="token punctuation">.</span>y<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Mouse</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleMouseMove <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleMouseMove</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleMouseMove</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">x</span><span class="token operator">:</span> event<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>
      <span class="token literal-property property">y</span><span class="token operator">:</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'100vh'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token attr-name">onMouseMove</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleMouseMove<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/*
          ä½¿ç”¨ `render`prop åŠ¨æ€å†³å®šè¦æ¸²æŸ“çš„å†…å®¹ï¼Œ
          è€Œä¸æ˜¯ç»™å‡ºä¸€ä¸ª &lt;Mouse> æ¸²æŸ“ç»“æœçš„é™æ€è¡¨ç¤º
        */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MouseTracker</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">ç§»åŠ¨é¼ æ ‡!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Mouse</span></span> <span class="token attr-name">render</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">mouse</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Cat</span></span> <span class="token attr-name">mouse</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>mouse<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="render-props-ä¸-react-purecomponent-åŒæ—¶ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#render-props-ä¸-react-purecomponent-åŒæ—¶ä½¿ç”¨" aria-hidden="true">#</a> Render props ä¸ React.PureComponent åŒæ—¶ä½¿ç”¨</h3>
<p>å¦‚æœåœ¨<code v-pre>render</code>æ–¹æ³•ä¸­åˆ›å»ºå‡½æ•°ï¼Œé‚£ä¹ˆä½¿ç”¨<code v-pre>render prop</code>ä¼šæŠµæ¶ˆä½¿ç”¨<code v-pre>React.PureComponent</code>å¸¦æ¥çš„ä¼˜åŠ¿</p>
<p>å› ä¸ºæ¯æ¬¡è°ƒç”¨<code v-pre>render()</code>è¿›è¡Œæ¸²æŸ“æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™å°†å¯¼è‡´æµ…æ¯”è¾ƒ<code v-pre>props</code>çš„æ—¶å€™<code v-pre>prevProps === nextProps</code>å§‹ç»ˆä¸º<code v-pre>false</code></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Mouse</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸ä¸Šé¢ç›¸åŒçš„ä»£ç ......</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MouseTracker</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Mouse</span></span> <span class="token attr-name">render</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">mouse</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Cat</span></span> <span class="token attr-name">mouse</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>mouse<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç”±äº<code v-pre>Mouse</code>ç»„ä»¶çš„<code v-pre>render prop</code>ä¼ è¾“çš„å‡½æ•°æ˜¯åœ¨<code v-pre>render()</code>ä¸­å®šä¹‰çš„ï¼Œè¿™å°†å¯¼è‡´æ¯æ¬¡<code v-pre>MouseTracker</code>æ¸²æŸ“æ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°ä½œä¸º<code v-pre>Mouse</code>ç»„ä»¶çš„<code v-pre>render prop</code>ï¼Œå› è€ŒæŠµæ¶ˆäº†ç»§æ‰¿è‡ª<code v-pre>React.PureComponent</code>çš„æ•ˆæœ</p>
<h3 id="è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> è§£å†³æ–¹æ¡ˆ</h3>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå®ä¾‹æ–¹æ³•ä¼ ç»™<code v-pre>render prop</code></p>
<div class="language-jsx ext-jsx line-numbers-mode"><pre v-pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">MouseTracker</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// å®šä¹‰ä¸ºå®ä¾‹æ–¹æ³•ï¼Œå½“æˆ‘ä»¬åœ¨æ¸²æŸ“ä¸­ä½¿ç”¨å®ƒæ—¶ï¼Œå®ƒæŒ‡çš„æ˜¯ç›¸åŒçš„å‡½æ•°</span>
  <span class="token function">renderTheCat</span><span class="token punctuation">(</span><span class="token parameter">mouse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Cat</span></span> <span class="token attr-name">mouse</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>mouse<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Move the mouse around!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Mouse</span></span> <span class="token attr-name">render</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>renderTheCat<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


